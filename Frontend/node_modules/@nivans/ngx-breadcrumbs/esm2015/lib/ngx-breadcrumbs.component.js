/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component } from '@angular/core';
import { ActivatedRoute, NavigationEnd, Router } from '@angular/router';
import { filter } from 'rxjs/internal/operators';
import { NgxBreadcrumbsService } from './ngx-breadcrumbs.service';
export class NgxBreadcrumbsComponent {
    /**
     * @param {?} router
     * @param {?} activatedRoute
     * @param {?} service
     */
    constructor(router, activatedRoute, service) {
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.service = service;
        this.customCrumbs = [];
        this.show = true;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.router.events
            .pipe(filter(event => event instanceof NavigationEnd))
            .subscribe(() => {
            this.breadcrumbs = this.handleRoute(this.activatedRoute.root);
        });
        this.service.dynamicCrumbs.subscribe(crumb => {
            this.customCrumbs[crumb.component] = crumb;
            this.breadcrumbs = this.handleRoute(this.activatedRoute.root);
        });
    }
    /**
     * @param {?} route
     * @param {?=} breadcrumbs
     * @return {?}
     */
    handleRoute(route, breadcrumbs = []) {
        if (breadcrumbs.length === 0) {
            breadcrumbs.push(this.getCrumbFromRoute(this.getHomeRoute()));
        }
        if (route.routeConfig !== null &&
            'data' in route.routeConfig &&
            'breadcrumb' in route.routeConfig.data &&
            !route.routeConfig.data["isHome"]) {
            const /** @type {?} */ urlPrefix = breadcrumbs[breadcrumbs.length - 1] ? breadcrumbs[breadcrumbs.length - 1].url : '';
            const /** @type {?} */ customCrumb = route.routeConfig.component && this.customCrumbs[route.routeConfig.component.name];
            const /** @type {?} */ defaultCrumb = this.getCrumbFromRoute(route.routeConfig, urlPrefix);
            const /** @type {?} */ crumb = customCrumb ? Object.assign(defaultCrumb, customCrumb) : defaultCrumb;
            breadcrumbs = [...breadcrumbs, crumb];
        }
        if (route.firstChild) {
            return this.handleRoute(route.firstChild, breadcrumbs);
        }
        delete (breadcrumbs[breadcrumbs.length - 1].url);
        this.show = breadcrumbs[breadcrumbs.length - 1].show;
        return breadcrumbs;
    }
    /**
     * @return {?}
     */
    getHomeRoute() {
        return this.router.config.filter(crumb => crumb.data && crumb.data["isHome"])[0];
    }
    /**
     * @param {?} route
     * @param {?=} urlPrefix
     * @return {?}
     */
    getCrumbFromRoute(route, urlPrefix = null) {
        return {
            label: route.data && route.data["breadcrumb"],
            url: urlPrefix ? `${urlPrefix}/${route.path}` : route.path || '/',
            component: route.component && route.component.name,
            icon: route.data["icon"],
            show: route.data.hasOwnProperty('show') ? route.data["show"] : true
        };
    }
}
NgxBreadcrumbsComponent.decorators = [
    { type: Component, args: [{
                selector: 'nvs-ngx-breadcrumbs',
                template: `
    <nav aria-label="breadcrumb"
         *ngIf="show">
      <ol class="breadcrumb">
        <li *ngFor="let breadcrumb of breadcrumbs"
            class="breadcrumb-item"
            [ngClass]="{'active': !breadcrumb.url}">
          <a [routerLink]="[breadcrumb.url]"
             *ngIf="breadcrumb.url">
            <i class="{{ breadcrumb.icon }}" *ngIf="breadcrumb.icon"></i>
            {{ breadcrumb.label }}
          </a>
          <span *ngIf="!breadcrumb.url">
            <i class="{{ breadcrumb.icon }}" *ngIf="breadcrumb.icon"></i>
            {{ breadcrumb.label }}
          </span>
        </li>
      </ol>
    </nav>
  `,
                styles: []
            },] },
];
/** @nocollapse */
NgxBreadcrumbsComponent.ctorParameters = () => [
    { type: Router },
    { type: ActivatedRoute },
    { type: NgxBreadcrumbsService }
];
function NgxBreadcrumbsComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.customCrumbs;
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.breadcrumbs;
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.show;
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.router;
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.activatedRoute;
    /** @type {?} */
    NgxBreadcrumbsComponent.prototype.service;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWJyZWFkY3J1bWJzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuaXZhbnMvbmd4LWJyZWFkY3J1bWJzLyIsInNvdXJjZXMiOlsibGliL25neC1icmVhZGNydW1icy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDbEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFTLE1BQU0saUJBQWlCLENBQUM7QUFDL0UsT0FBTyxFQUFFLE1BQU0sRUFBTyxNQUFNLHlCQUF5QixDQUFDO0FBR3RELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBMEJsRSxNQUFNOzs7Ozs7SUFLSixZQUFvQixNQUFjLEVBQ2QsZ0JBQ0E7UUFGQSxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsbUJBQWMsR0FBZCxjQUFjO1FBQ2QsWUFBTyxHQUFQLE9BQU87NEJBTlosRUFBRTtvQkFFVixJQUFJO0tBSTJDOzs7O0lBRXRELFFBQVE7UUFDTixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU07YUFDZixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxZQUFZLGFBQWEsQ0FBQyxDQUFDO2FBQ3JELFNBQVMsQ0FBQyxHQUFHLEVBQUU7WUFDZCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUMvRCxDQUFDLENBQUM7UUFDTCxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxDQUFDO1lBQzNDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FB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QyxDQUFDLEtBQUssQ0FBQyxJQUFJLFNBQU0sQ0FBQyxDQUFDLElBQUk7U0FDakUsQ0FBQztLQUNIOzs7WUFyRkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxxQkFBcUI7Z0JBQy9CLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW1CVDtnQkFDRCxNQUFNLEVBQUUsRUFBRTthQUNYOzs7O1lBN0J1QyxNQUFNO1lBQXJDLGNBQWM7WUFJZCxxQkFBcUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIE5hdmlnYXRpb25FbmQsIFJvdXRlciwgUm91dGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgZmlsdGVyLCBtYXAgfSBmcm9tICdyeGpzL2ludGVybmFsL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBOZ3hCcmVhZGNydW1iIH0gZnJvbSAnLi9uZ3gtYnJlYWRjcnVtYic7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTmd4QnJlYWRjcnVtYnNTZXJ2aWNlIH0gZnJvbSAnLi9uZ3gtYnJlYWRjcnVtYnMuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ252cy1uZ3gtYnJlYWRjcnVtYnMnLFxuICB0ZW1wbGF0ZTogYFxuICAgIDxuYXYgYXJpYS1sYWJlbD1cImJyZWFkY3J1bWJcIlxuICAgICAgICAgKm5nSWY9XCJzaG93XCI+XG4gICAgICA8b2wgY2xhc3M9XCJicmVhZGNydW1iXCI+XG4gICAgICAgIDxsaSAqbmdGb3I9XCJsZXQgYnJlYWRjcnVtYiBvZiBicmVhZGNydW1ic1wiXG4gICAgICAgICAgICBjbGFzcz1cImJyZWFkY3J1bWItaXRlbVwiXG4gICAgICAgICAgICBbbmdDbGFzc109XCJ7J2FjdGl2ZSc6ICFicmVhZGNydW1iLnVybH1cIj5cbiAgICAgICAgICA8YSBbcm91dGVyTGlua109XCJbYnJlYWRjcnVtYi51cmxdXCJcbiAgICAgICAgICAgICAqbmdJZj1cImJyZWFkY3J1bWIudXJsXCI+XG4gICAgICAgICAgICA8aSBjbGFzcz1cInt7IGJyZWFkY3J1bWIuaWNvbiB9fVwiICpuZ0lmPVwiYnJlYWRjcnVtYi5pY29uXCI+PC9pPlxuICAgICAgICAgICAge3sgYnJlYWRjcnVtYi5sYWJlbCB9fVxuICAgICAgICAgIDwvYT5cbiAgICAgICAgICA8c3BhbiAqbmdJZj1cIiFicmVhZGNydW1iLnVybFwiPlxuICAgICAgICAgICAgPGkgY2xhc3M9XCJ7eyBicmVhZGNydW1iLmljb24gfX1cIiAqbmdJZj1cImJyZWFkY3J1bWIuaWNvblwiPjwvaT5cbiAgICAgICAgICAgIHt7IGJyZWFkY3J1bWIubGFiZWwgfX1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgIDwvbGk+XG4gICAgICA8L29sPlxuICAgIDwvbmF2PlxuICBgLFxuICBzdHlsZXM6IFtdXG59KVxuZXhwb3J0IGNsYXNzIE5neEJyZWFkY3J1bWJzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgY3VzdG9tQ3J1bWJzID0gW107XG4gIGJyZWFkY3J1bWJzOiBOZ3hCcmVhZGNydW1iW107XG4gIHNob3cgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgICAgICAgICAgIHByaXZhdGUgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgICAgICAgICAgICBwcml2YXRlIHNlcnZpY2U6IE5neEJyZWFkY3J1bWJzU2VydmljZSkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJvdXRlci5ldmVudHNcbiAgICAgIC5waXBlKGZpbHRlcihldmVudCA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYnJlYWRjcnVtYnMgPSB0aGlzLmhhbmRsZVJvdXRlKHRoaXMuYWN0aXZhdGVkUm91dGUucm9vdCk7XG4gICAgICB9KTtcbiAgICB0aGlzLnNlcnZpY2UuZHluYW1pY0NydW1icy5zdWJzY3JpYmUoY3J1bWIgPT4ge1xuICAgICAgdGhpcy5jdXN0b21DcnVtYnNbY3J1bWIuY29tcG9uZW50XSA9IGNydW1iO1xuICAgICAgdGhpcy5icmVhZGNydW1icyA9IHRoaXMuaGFuZGxlUm91dGUodGhpcy5hY3RpdmF0ZWRSb3V0ZS5yb290KTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZVJvdXRlKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICAgICAgICAgICAgYnJlYWRjcnVtYnM6IEFycmF5PE5neEJyZWFkY3J1bWI+ID0gW10pOlxuICBBcnJheTxOZ3hCcmVhZGNydW1iPiB7XG4gICAgaWYgKGJyZWFkY3J1bWJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYnJlYWRjcnVtYnMucHVzaCh0aGlzLmdldENydW1iRnJvbVJvdXRlKHRoaXMuZ2V0SG9tZVJvdXRlKCkpKTtcbiAgICB9XG5cbiAgICBpZiAocm91dGUucm91dGVDb25maWcgIT09IG51bGwgJiZcbiAgICAgICAgJ2RhdGEnIGluIHJvdXRlLnJvdXRlQ29uZmlnICYmXG4gICAgICAgICdicmVhZGNydW1iJyBpbiByb3V0ZS5yb3V0ZUNvbmZpZy5kYXRhICYmXG4gICAgICAgICFyb3V0ZS5yb3V0ZUNvbmZpZy5kYXRhLmlzSG9tZVxuICAgICkge1xuICAgICAgY29uc3QgdXJsUHJlZml4ID0gYnJlYWRjcnVtYnNbYnJlYWRjcnVtYnMubGVuZ3RoIC0gMV0gPyBicmVhZGNydW1ic1ticmVhZGNydW1icy5sZW5ndGggLSAxXS51cmwgOiAnJztcbiAgICAgIGNvbnN0IGN1c3RvbUNydW1iID0gcm91dGUucm91dGVDb25maWcuY29tcG9uZW50ICYmIHRoaXMuY3VzdG9tQ3J1bWJzW3JvdXRlLnJvdXRlQ29uZmlnLmNvbXBvbmVudC5uYW1lXTtcbiAgICAgIGNvbnN0IGRlZmF1bHRDcnVtYiA9IHRoaXMuZ2V0Q3J1bWJGcm9tUm91dGUocm91dGUucm91dGVDb25maWcsIHVybFByZWZpeCk7XG4gICAgICBjb25zdCBjcnVtYiA9IGN1c3RvbUNydW1iID8gT2JqZWN0LmFzc2lnbihkZWZhdWx0Q3J1bWIsIGN1c3RvbUNydW1iKSA6IGRlZmF1bHRDcnVtYjtcbiAgICAgIGJyZWFkY3J1bWJzID0gWyAuLi5icmVhZGNydW1icywgY3J1bWIgXTtcbiAgICB9XG5cbiAgICBpZiAocm91dGUuZmlyc3RDaGlsZCkge1xuICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlUm91dGUocm91dGUuZmlyc3RDaGlsZCwgYnJlYWRjcnVtYnMpO1xuICAgIH1cblxuICAgIGRlbGV0ZShicmVhZGNydW1ic1ticmVhZGNydW1icy5sZW5ndGggLSAxXS51cmwpO1xuICAgIHRoaXMuc2hvdyA9IGJyZWFkY3J1bWJzW2JyZWFkY3J1bWJzLmxlbmd0aCAtIDFdLnNob3c7XG4gICAgcmV0dXJuIGJyZWFkY3J1bWJzO1xuICB9XG5cbiAgZ2V0SG9tZVJvdXRlKCkge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci5jb25maWcuZmlsdGVyKGNydW1iID0+IGNydW1iLmRhdGEgJiYgY3J1bWIuZGF0YS5pc0hvbWUpWzBdO1xuICB9XG5cbiAgZ2V0Q3J1bWJGcm9tUm91dGUocm91dGU6IFJvdXRlLCB1cmxQcmVmaXggPSBudWxsKTogTmd4QnJlYWRjcnVtYiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhYmVsOiByb3V0ZS5kYXRhICYmIHJvdXRlLmRhdGEuYnJlYWRjcnVtYixcbiAgICAgIHVybDogdXJsUHJlZml4ID8gYCR7dXJsUHJlZml4fS8ke3JvdXRlLnBhdGh9YCA6IHJvdXRlLnBhdGggfHwgJy8nLFxuICAgICAgY29tcG9uZW50OiByb3V0ZS5jb21wb25lbnQgJiYgcm91dGUuY29tcG9uZW50Lm5hbWUsXG4gICAgICBpY29uOiByb3V0ZS5kYXRhLmljb24sXG4gICAgICBzaG93OiByb3V0ZS5kYXRhLmhhc093blByb3BlcnR5KCdzaG93JykgPyByb3V0ZS5kYXRhLnNob3cgOiB0cnVlXG4gICAgfTtcbiAgfVxufVxuIl19