/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { of } from 'rxjs';
import { Injectable } from '@angular/core';
import { template, templateSettings } from 'lodash';
templateSettings.interpolate = /{{([\s\S]+?)}}/g;
export class PpBreadcrumbsResolver {
    /**
     * @param {?} route
     * @param {?} state
     * @return {?}
     */
    resolve(route, state) {
        /** @type {?} */
        const data = route.routeConfig.data;
        /** @type {?} */
        const path = this.getFullPath(route);
        /** @type {?} */
        const rawText = typeof data.breadcrumbs === 'string' ? data.breadcrumbs : data.breadcrumbs.text || data.text || path;
        return of([
            {
                path: path,
                text: this.stringFormat(rawText, route.data)
            }
        ]);
    }
    /**
     * @param {?} route
     * @return {?}
     */
    getFullPath(route) {
        /** @type {?} */
        const relativePath = (/**
         * @param {?} segments
         * @return {?}
         */
        (segments) => segments.reduce((/**
         * @param {?} a
         * @param {?} v
         * @return {?}
         */
        (a, v) => (a += '/' + v.path)), ''));
        /** @type {?} */
        const fullPath = (/**
         * @param {?} routes
         * @return {?}
         */
        (routes) => routes.reduce((/**
         * @param {?} a
         * @param {?} v
         * @return {?}
         */
        (a, v) => (a += relativePath(v.url))), ''));
        return fullPath(route.pathFromRoot);
    }
    /**
     * @private
     * @param {?} templateString
     * @param {?} binding
     * @return {?}
     */
    stringFormat(templateString, binding) {
        /** @type {?} */
        const compiled = template(templateString);
        return compiled(binding);
    }
}
PpBreadcrumbsResolver.decorators = [
    { type: Injectable }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJlYWRjcnVtYnMucmVzb2x2ZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9wcC1icmVhZGNydW1icy8iLCJzb3VyY2VzIjpbImxpYi9icmVhZGNydW1icy5yZXNvbHZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUV0QyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxRQUFRLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFFcEQsZ0JBQWdCLENBQUMsV0FBVyxHQUFHLGlCQUFpQixDQUFDO0FBR2pELE1BQU0sT0FBTyxxQkFBcUI7Ozs7OztJQUVoQyxPQUFPLENBQUMsS0FBNkIsRUFBRSxLQUEwQjs7Y0FDekQsSUFBSSxHQUFHLEtBQUssQ0FBQyxXQUFXLENBQUMsSUFBSTs7Y0FDN0IsSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDOztjQUM5QixPQUFPLEdBQUcsT0FBTyxJQUFJLENBQUMsV0FBVyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJO1FBRXBILE9BQU8sRUFBRSxDQUFDO1lBQ1I7Z0JBQ0UsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxJQUFJLENBQUM7YUFDN0M7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDOzs7OztJQUVELFdBQVcsQ0FBQyxLQUE2Qjs7Y0FDakMsWUFBWTs7OztRQUFHLENBQUMsUUFBc0IsRUFBRSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU07Ozs7O1FBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFFLEVBQUUsQ0FBQyxDQUFBOztjQUM3RixRQUFROzs7O1FBQUcsQ0FBQyxNQUFnQyxFQUFFLEVBQUUsQ0FBQyxNQUFNLENBQUMsTUFBTTs7Ozs7UUFBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRSxFQUFFLENBQUMsQ0FBQTtRQUM5RyxPQUFPLFFBQVEsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEMsQ0FBQzs7Ozs7OztJQUVPLFlBQVksQ0FBQyxjQUFzQixFQUFFLE9BQVk7O2NBQ2pELFFBQVEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDO1FBQ3pDLE9BQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzNCLENBQUM7OztZQXpCRixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgUmVzb2x2ZSwgUm91dGVyU3RhdGVTbmFwc2hvdCwgVXJsU2VnbWVudCB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IEJyZWFkY3J1bWIgfSBmcm9tICcuL2JyZWFkY3J1bWInO1xyXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IHRlbXBsYXRlLCB0ZW1wbGF0ZVNldHRpbmdzIH0gZnJvbSAnbG9kYXNoJztcclxuXHJcbnRlbXBsYXRlU2V0dGluZ3MuaW50ZXJwb2xhdGUgPSAve3soW1xcc1xcU10rPyl9fS9nO1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUHBCcmVhZGNydW1ic1Jlc29sdmVyIGltcGxlbWVudHMgUmVzb2x2ZTxCcmVhZGNydW1iW10+IHtcclxuXHJcbiAgcmVzb2x2ZShyb3V0ZTogQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgc3RhdGU6IFJvdXRlclN0YXRlU25hcHNob3QpOiBPYnNlcnZhYmxlPEJyZWFkY3J1bWJbXT4gfCBQcm9taXNlPEJyZWFkY3J1bWJbXT4gfCBCcmVhZGNydW1iW10ge1xyXG4gICAgY29uc3QgZGF0YSA9IHJvdXRlLnJvdXRlQ29uZmlnLmRhdGE7XHJcbiAgICBjb25zdCBwYXRoID0gdGhpcy5nZXRGdWxsUGF0aChyb3V0ZSk7XHJcbiAgICBjb25zdCByYXdUZXh0ID0gdHlwZW9mIGRhdGEuYnJlYWRjcnVtYnMgPT09ICdzdHJpbmcnID8gZGF0YS5icmVhZGNydW1icyA6IGRhdGEuYnJlYWRjcnVtYnMudGV4dCB8fCBkYXRhLnRleHQgfHwgcGF0aDtcclxuXHJcbiAgICByZXR1cm4gb2YoW1xyXG4gICAgICB7XHJcbiAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICB0ZXh0OiB0aGlzLnN0cmluZ0Zvcm1hdChyYXdUZXh0LCByb3V0ZS5kYXRhKVxyXG4gICAgICB9XHJcbiAgICBdKTtcclxuICB9XHJcblxyXG4gIGdldEZ1bGxQYXRoKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHJlbGF0aXZlUGF0aCA9IChzZWdtZW50czogVXJsU2VnbWVudFtdKSA9PiBzZWdtZW50cy5yZWR1Y2UoKGEsIHYpID0+IChhICs9ICcvJyArIHYucGF0aCksICcnKTtcclxuICAgIGNvbnN0IGZ1bGxQYXRoID0gKHJvdXRlczogQWN0aXZhdGVkUm91dGVTbmFwc2hvdFtdKSA9PiByb3V0ZXMucmVkdWNlKChhLCB2KSA9PiAoYSArPSByZWxhdGl2ZVBhdGgodi51cmwpKSwgJycpO1xyXG4gICAgcmV0dXJuIGZ1bGxQYXRoKHJvdXRlLnBhdGhGcm9tUm9vdCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN0cmluZ0Zvcm1hdCh0ZW1wbGF0ZVN0cmluZzogc3RyaW5nLCBiaW5kaW5nOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgY29tcGlsZWQgPSB0ZW1wbGF0ZSh0ZW1wbGF0ZVN0cmluZyk7XHJcbiAgICByZXR1cm4gY29tcGlsZWQoYmluZGluZyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==