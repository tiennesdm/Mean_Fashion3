/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component } from '@angular/core';
import { ActivatedRoute, Router, NavigationEnd, PRIMARY_OUTLET } from '@angular/router';
import { filter } from 'rxjs/operators';
import { map } from 'rxjs/internal/operators';
import { Ng7MatBreadcrumbService } from './ng7-mat-breadcrumb.service';
export class Ng7MatBreadcrumbComponent {
    /**
     * @param {?} activatedRoute
     * @param {?} router
     * @param {?} ng7MatBreadcrumbService
     */
    constructor(activatedRoute, router, ng7MatBreadcrumbService) {
        this.activatedRoute = activatedRoute;
        this.router = router;
        this.ng7MatBreadcrumbService = ng7MatBreadcrumbService;
        this.breadcrumb = [];
        this.breadCrumbData();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.ng7MatBreadcrumbService.breadcrumbLabels.subscribe((/**
         * @param {?} labelData
         * @return {?}
         */
        (labelData) => {
            for (const label in labelData) {
                if (labelData.hasOwnProperty(label)) {
                    this.breadcrumb.map((/**
                     * @param {?} crumb
                     * @return {?}
                     */
                    (crumb) => {
                        /** @type {?} */
                        const labelParams = crumb.label.match(/[^{{]+(?=\}})/g);
                        if (labelParams) {
                            for (const labelParam of labelParams) {
                                /** @type {?} */
                                const dyanmicData = labelData[label];
                                if (labelParam === label) {
                                    crumb.label = crumb.label.replace('{{' + labelParam + '}}', dyanmicData);
                                }
                            }
                        }
                    }));
                }
            }
        }));
    }
    /**
     * @return {?}
     */
    breadCrumbData() {
        this.router.events
            .pipe(filter((/**
         * @param {?} event
         * @return {?}
         */
        event => event instanceof NavigationEnd)))
            .pipe(map((/**
         * @return {?}
         */
        () => this.activatedRoute)))
            .pipe(map((/**
         * @param {?} route
         * @return {?}
         */
        (route) => {
            while (route.firstChild) {
                route = route.firstChild;
            }
            return route;
        })))
            .pipe(filter((/**
         * @param {?} route
         * @return {?}
         */
        route => route.outlet === PRIMARY_OUTLET)))
            .subscribe((/**
         * @param {?} route
         * @return {?}
         */
        route => {
            if (route.snapshot.data.breadcrumb) {
                /** @type {?} */
                const breadcrumb = (JSON.parse(JSON.stringify(route.snapshot.data.breadcrumb)));
                breadcrumb.map((/**
                 * @param {?} crumb
                 * @return {?}
                 */
                (crumb) => {
                    /** @type {?} */
                    const urlChunks = crumb.url.split('/');
                    for (const chunk of urlChunks) {
                        if (chunk.includes(':')) {
                            /** @type {?} */
                            const paramID = chunk.replace(':', '');
                            /** @type {?} */
                            const routerParamID = route.snapshot.params[paramID];
                            crumb.url = crumb.url.replace(`:${paramID}`, routerParamID);
                        }
                    }
                    /** @type {?} */
                    const labelParams = crumb.label.match(/[^{{]+(?=\}})/g);
                    if (labelParams) {
                        for (const labelParam of labelParams) {
                            /** @type {?} */
                            const routerParamID = route.snapshot.params[labelParam.trim()];
                            if (routerParamID) {
                                crumb.label = crumb.label.replace('{{' + labelParam + '}}', routerParamID);
                            }
                            else {
                                // crumb.label = crumb.label.replace('{{' + labelParam + '}}', '');
                            }
                        }
                    }
                }));
                this.breadcrumb = breadcrumb;
            }
            else {
                this.breadcrumb = [];
            }
        }));
    }
}
Ng7MatBreadcrumbComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-ng7-mat-breadcrumb',
                template: "<mat-toolbar class=\"mat-bread-crumb\">\n    <mat-list class=\"mat-bread-crumb-list\" *ngIf=\"breadcrumb.length\">\n        <mat-list-item>\n            <span class=\"mat-bread-crumb-spacer\">\n                <span *ngFor=\"let item of breadcrumb; let i = index\">\n                    <a *ngIf=\"item?.url\" [routerLink]=\"item?.url\" class=\"mat-bread-crumb-list-item\">{{ item.label }}</a>\n                    <span *ngIf=\"!item?.url\" class=\"mat-bread-crumb-list-item\">{{ item.label }}</span>\n                    <span *ngIf=\"breadcrumb.length !== i+1\"> / </span>\n                </span>\n            </span>\n        </mat-list-item>\n    </mat-list>\n</mat-toolbar>",
                styles: [".mat-bread-crumb{height:30px;background-color:#f1efeb}.mat-bread-crumb-list{padding-bottom:10px}.mat-bread-crumb-list-item{font-size:15px}.mat-bread-crumb-spacer{margin-left:-20px}"]
            }] }
];
/** @nocollapse */
Ng7MatBreadcrumbComponent.ctorParameters = () => [
    { type: ActivatedRoute },
    { type: Router },
    { type: Ng7MatBreadcrumbService }
];
if (false) {
    /** @type {?} */
    Ng7MatBreadcrumbComponent.prototype.breadcrumb;
    /**
     * @type {?}
     * @private
     */
    Ng7MatBreadcrumbComponent.prototype.activatedRoute;
    /**
     * @type {?}
     * @private
     */
    Ng7MatBreadcrumbComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    Ng7MatBreadcrumbComponent.prototype.ng7MatBreadcrumbService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmc3LW1hdC1icmVhZGNydW1iLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25nNy1tYXQtYnJlYWRjcnVtYi8iLCJzb3VyY2VzIjpbImxpYi9uZzctbWF0LWJyZWFkY3J1bWIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUN6RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFvQixNQUFNLGlCQUFpQixDQUFDO0FBQzFHLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFZLE1BQU0seUJBQXlCLENBQUM7QUFFeEQsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFPdkUsTUFBTSxPQUFPLHlCQUF5Qjs7Ozs7O0lBR3BDLFlBQ1UsY0FBOEIsRUFDOUIsTUFBYyxFQUNkLHVCQUFnRDtRQUZoRCxtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFDOUIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLDRCQUF1QixHQUF2Qix1QkFBdUIsQ0FBeUI7UUFMMUQsZUFBVSxHQUFpQixFQUFFLENBQUM7UUFPNUIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3hCLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLHVCQUF1QixDQUFDLGdCQUFnQixDQUFDLFNBQVM7Ozs7UUFBQyxDQUFDLFNBQVMsRUFBRSxFQUFFO1lBQ3BFLEtBQUssTUFBTSxLQUFLLElBQUksU0FBUyxFQUFFO2dCQUM3QixJQUFJLFNBQVMsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEVBQUU7b0JBQ25DLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRzs7OztvQkFBQyxDQUFDLEtBQUssRUFBRSxFQUFFOzs4QkFDdEIsV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFL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QjtpQkFBTTtnQkFDTCxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQzthQUN0QjtRQUNILENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7O1lBOUVGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsd0JBQXdCO2dCQUNsQyxvckJBQWtEOzthQUVuRDs7OztZQVZRLGNBQWM7WUFBRSxNQUFNO1lBSXRCLHVCQUF1Qjs7OztJQVE5QiwrQ0FBOEI7Ozs7O0lBRzVCLG1EQUFzQzs7Ozs7SUFDdEMsMkNBQXNCOzs7OztJQUN0Qiw0REFBd0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlLCBSb3V0ZXIsIE5hdmlnYXRpb25FbmQsIFBSSU1BUllfT1VUTEVULCBSb3V0ZXNSZWNvZ25pemVkIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IG1hcCwgbWVyZ2VNYXAgfSBmcm9tICdyeGpzL2ludGVybmFsL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBCcmVhZGNydW1iIH0gZnJvbSAnLi9icmVhZGNydW1iLm1vZGVsJztcbmltcG9ydCB7IE5nN01hdEJyZWFkY3J1bWJTZXJ2aWNlIH0gZnJvbSAnLi9uZzctbWF0LWJyZWFkY3J1bWIuc2VydmljZSc7XG5pbXBvcnQgeyBmcm9tIH0gZnJvbSAncnhqcyc7XG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbmc3LW1hdC1icmVhZGNydW1iJyxcbiAgdGVtcGxhdGVVcmw6ICcuL25nNy1tYXQtYnJlYWRjcnVtYi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL25nNy1tYXQtYnJlYWRjcnVtYi5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTmc3TWF0QnJlYWRjcnVtYkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIGJyZWFkY3J1bWI6IEJyZWFkY3J1bWJbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBuZzdNYXRCcmVhZGNydW1iU2VydmljZTogTmc3TWF0QnJlYWRjcnVtYlNlcnZpY2VcbiAgKSB7XG4gICAgdGhpcy5icmVhZENydW1iRGF0YSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5uZzdNYXRCcmVhZGNydW1iU2VydmljZS5icmVhZGNydW1iTGFiZWxzLnN1YnNjcmliZSgobGFiZWxEYXRhKSA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGxhYmVsIGluIGxhYmVsRGF0YSkge1xuICAgICAgICBpZiAobGFiZWxEYXRhLmhhc093blByb3BlcnR5KGxhYmVsKSkge1xuICAgICAgICAgIHRoaXMuYnJlYWRjcnVtYi5tYXAoKGNydW1iKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbFBhcmFtcyA9IGNydW1iLmxhYmVsLm1hdGNoKC9bXnt7XSsoPz1cXH19KS9nKTtcbiAgICAgICAgICAgIGlmIChsYWJlbFBhcmFtcykge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxhYmVsUGFyYW0gb2YgbGFiZWxQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkeWFubWljRGF0YSA9IGxhYmVsRGF0YVtsYWJlbF07XG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsUGFyYW0gPT09IGxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICBjcnVtYi5sYWJlbCA9IGNydW1iLmxhYmVsLnJlcGxhY2UoJ3t7JyArIGxhYmVsUGFyYW0gKyAnfX0nLCBkeWFubWljRGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0pO1xuICB9XG5cbiAgYnJlYWRDcnVtYkRhdGEoKSB7XG4gICAgdGhpcy5yb3V0ZXIuZXZlbnRzXG4gICAgICAucGlwZShmaWx0ZXIoZXZlbnQgPT4gZXZlbnQgaW5zdGFuY2VvZiBOYXZpZ2F0aW9uRW5kKSlcbiAgICAgIC5waXBlKG1hcCgoKSA9PiB0aGlzLmFjdGl2YXRlZFJvdXRlKSlcbiAgICAgIC5waXBlKG1hcCgocm91dGUpID0+IHtcbiAgICAgICAgd2hpbGUgKHJvdXRlLmZpcnN0Q2hpbGQpIHsgcm91dGUgPSByb3V0ZS5maXJzdENoaWxkOyB9XG4gICAgICAgIHJldHVybiByb3V0ZTtcbiAgICAgIH0pKVxuICAgICAgLnBpcGUoZmlsdGVyKHJvdXRlID0+IHJvdXRlLm91dGxldCA9PT0gUFJJTUFSWV9PVVRMRVQpKVxuICAgICAgLnN1YnNjcmliZShyb3V0ZSA9PiB7XG5cbiAgICAgICAgaWYgKHJvdXRlLnNuYXBzaG90LmRhdGEuYnJlYWRjcnVtYikge1xuICAgICAgICAgIGNvbnN0IGJyZWFkY3J1bWIgPSAoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3V0ZS5zbmFwc2hvdC5kYXRhLmJyZWFkY3J1bWIpKSk7XG4gICAgICAgICAgYnJlYWRjcnVtYi5tYXAoKGNydW1iKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1cmxDaHVua3MgPSBjcnVtYi51cmwuc3BsaXQoJy8nKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2h1bmsgb2YgdXJsQ2h1bmtzKSB7XG4gICAgICAgICAgICAgIGlmIChjaHVuay5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1JRCA9IGNodW5rLnJlcGxhY2UoJzonLCAnJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGVyUGFyYW1JRCA9IHJvdXRlLnNuYXBzaG90LnBhcmFtc1twYXJhbUlEXTtcbiAgICAgICAgICAgICAgICBjcnVtYi51cmwgPSBjcnVtYi51cmwucmVwbGFjZShgOiR7cGFyYW1JRH1gLCByb3V0ZXJQYXJhbUlEKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsYWJlbFBhcmFtcyA9IGNydW1iLmxhYmVsLm1hdGNoKC9bXnt7XSsoPz1cXH19KS9nKTtcbiAgICAgICAgICAgIGlmIChsYWJlbFBhcmFtcykge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxhYmVsUGFyYW0gb2YgbGFiZWxQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZXJQYXJhbUlEID0gcm91dGUuc25hcHNob3QucGFyYW1zW2xhYmVsUGFyYW0udHJpbSgpXTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGVyUGFyYW1JRCkge1xuICAgICAgICAgICAgICAgICAgY3J1bWIubGFiZWwgPSBjcnVtYi5sYWJlbC5yZXBsYWNlKCd7eycgKyBsYWJlbFBhcmFtICsgJ319Jywgcm91dGVyUGFyYW1JRCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIGNydW1iLmxhYmVsID0gY3J1bWIubGFiZWwucmVwbGFjZSgne3snICsgbGFiZWxQYXJhbSArICd9fScsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuYnJlYWRjcnVtYiA9IGJyZWFkY3J1bWI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5icmVhZGNydW1iID0gW107XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG4iXX0=